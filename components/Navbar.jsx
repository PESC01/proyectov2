'use client';
import React from 'react';
import Link from 'next/link';
import { SignedOut, UserButton, SignedIn, useSession } from '@clerk/nextjs';
import { checkUserRole } from '../utils/userUtils';

const Navbar = () => {
  const { session } = useSession();
  const userRole = checkUserRole(session);

  const links = [
    { title: 'Profile', url: '/profile' },
    { title: 'Dashboard', url: '/user' },
    { title: 'Admin Dashboard', url: '/admin', role: 'admin' },
    // Add more placeholder links as needed
  ];

  return (
    <header className='text-gray-600 body-font bg-white shadow'>
      <div className='container mx-auto flex flex-wrap p-5 flex-col md:flex-row items-center justify-between'>
        <div className='flex items-center'>
          <a
            href='/'
            className='flex title-font font-medium items-center text-gray-900'
          >
            <svg version="1.0" xmlns="http://www.w3.org/2000/svg"
              width="70.000000pt" height="70.000000pt" viewBox="0 0 270.000000 270.000000"
              preserveAspectRatio="xMidYMid meet">

              <g transform="translate(0.000000,270.000000) scale(0.100000,-0.100000)"
                fill="#000000" stroke="none">
                <path d="M0 1350 l1 -1350 1349 0 1350 0 0 1350 0 1350 -1350 0 -1350 0 0
-1350z m1635 971 c178 -49 361 -158 491 -293 137 -141 222 -290 271 -476 22
-84 26 -118 26 -247 0 -130 -4 -164 -26 -250 -166 -635 -885 -961 -1493 -676
-309 145 -531 436 -584 764 -18 109 -8 320 20 422 102 378 414 675 804 766
116 27 376 21 491 -10z m-1574 -2281 c5 0 9 7 9 16 0 8 5 12 11 8 7 -4 6 -11
-4 -21 -21 -21 -37 -8 -35 30 l1 32 4 -32 c2 -18 8 -33 14 -33z"/>
                <path d="M1238 2290 c-273 -43 -511 -183 -668 -392 -384 -509 -212 -1199 367
-1470 300 -140 665 -123 948 44 101 61 245 191 311 283 58 82 119 212 145 310
32 117 32 366 1 480 -97 354 -390 639 -747 726 -92 22 -274 32 -357 19z m249
-61 c108 -14 258 -67 355 -125 95 -57 231 -182 293 -269 59 -82 120 -212 146
-310 27 -101 30 -303 6 -411 -26 -114 -50 -179 -69 -182 -17 -3 -18 9 -18 142
l0 145 -42 11 c-24 6 -48 13 -54 15 -7 2 -14 20 -16 39 -4 33 -2 36 23 36 15
0 29 6 32 14 7 17 -1 26 -23 26 -14 0 -21 18 -34 91 -13 68 -14 94 -6 105 9
10 8 19 -4 35 -9 13 -13 32 -10 46 6 22 3 23 -40 23 -45 0 -46 -1 -46 -31 0
-18 -7 -38 -17 -45 -16 -13 -17 -15 -2 -27 9 -6 15 -16 13 -22 -1 -5 -5 -27
-9 -47 -4 -29 -11 -38 -25 -38 -11 0 -20 -7 -20 -15 0 -9 10 -15 26 -15 22 0
25 -4 22 -27 -2 -20 -9 -29 -26 -31 -32 -5 -25 -36 9 -40 22 -3 25 -7 21 -28
-4 -24 -7 -25 -45 -19 l-40 7 5 -46 c6 -48 17 -71 25 -48 3 8 27 12 69 12 44
0 64 -4 64 -12 0 -10 2 -10 9 0 5 8 22 12 42 10 27 -2 35 -8 37 -26 l3 -23
-143 3 -143 3 -2 345 c-3 370 -4 380 -55 406 -31 16 -271 20 -311 5 -13 -5
-41 -28 -63 -50 l-39 -40 -60 39 -60 40 3 64 c6 104 3 106 -142 106 -149 0
-150 -1 -144 -99 3 -65 2 -70 -20 -80 -50 -23 -52 -46 -52 -521 l0 -440 -35 0
-35 0 0 215 c0 184 2 215 15 215 8 0 15 3 16 8 3 40 3 92 -1 92 -3 0 -80 -17
-172 -37 l-168 -37 0 -228 c0 -193 -2 -228 -15 -228 -19 0 -59 128 -75 239
-15 102 -8 271 15 361 39 151 148 334 261 440 216 202 497 296 771 259z m-427
-229 c0 -18 -5 -30 -13 -30 -9 0 -12 10 -9 30 2 17 8 30 13 30 5 0 9 -13 9
-30z m70 0 c0 -16 -4 -30 -10 -30 -5 0 -10 14 -10 30 0 17 5 30 10 30 6 0 10
-13 10 -30z m78 -3 c2 -19 -1 -27 -12 -27 -11 0 -16 10 -16 31 0 38 24 35 28
-4z m2 -87 c0 -6 -35 -10 -85 -10 -50 0 -85 4 -85 10 0 6 35 10 85 10 50 0 85
-4 85 -10z m-120 -71 c0 -12 -67 -12 -74 0 -3 4 -3 10 -1 13 8 7 75 -4 75 -13z
m235 -36 c79 -52 100 -73 74 -73 -17 0 -179 108 -179 120 0 19 20 10 105 -47z
m375 37 c0 -6 -36 -10 -87 -10 -61 0 -83 3 -73 10 20 13 160 13 160 0z m-495
-92 c43 -31 56 -48 35 -48 -19 0 -90 52 -90 66 0 19 3 18 55 -18z m535 -99 c6
-132 4 -145 -15 -152 -20 -8 -255 149 -255 171 0 10 16 37 36 61 l36 42 97 -3
96 -3 5 -116z m-695 -79 c0 -106 -3 -144 -12 -147 -10 -4 -13 30 -13 147 0
117 3 151 13 148 9 -4 12 -42 12 -148z m488 -16 c157 -103 182 -115 215 -103
29 11 37 6 29 -16 -4 -10 -19 -15 -45 -15 -30 0 -59 13 -123 53 -163 103 -219
142 -219 155 0 6 3 12 6 12 3 0 65 -39 137 -86z m497 51 c0 -8 -4 -15 -10 -15
-5 0 -10 7 -10 15 0 8 5 15 10 15 6 0 10 -7 10 -15z m5 -65 c-3 -5 -10 -10
-16 -10 -5 0 -9 5 -9 10 0 6 7 10 16 10 8 0 12 -4 9 -10z m-727 -18 c2 -7 -3
-12 -12 -12 -9 0 -16 7 -16 16 0 17 22 14 28 -4z m740 -50 c3 -16 -2 -22 -17
-22 -24 0 -35 15 -27 36 9 23 40 13 44 -14z m10 -84 c3 -25 0 -28 -27 -28 -33
0 -34 2 -25 38 10 34 48 26 52 -10z m-498 -59 c91 -28 171 -56 178 -61 9 -8
12 -84 12 -318 0 -234 -3 -310 -12 -318 -8 -5 -153 -12 -353 -16 -300 -6 -343
-4 -363 9 -22 16 -22 16 -22 325 0 231 3 311 12 317 24 16 324 111 353 112 16
1 104 -22 195 -50z m-940 11 c0 -16 -7 -20 -30 -20 -23 0 -30 4 -30 20 0 16 7
20 30 20 23 0 30 -4 30 -20z m80 0 c0 -16 -7 -20 -30 -20 -23 0 -30 4 -30 20
0 16 7 20 30 20 23 0 30 -4 30 -20z m78 -2 c3 -14 -4 -18 -31 -18 -34 0 -36 3
-28 38 1 2 13 2 28 0 17 -2 29 -10 31 -20z m52 -193 c0 -184 -2 -215 -15 -215
-13 0 -15 25 -15 169 0 92 -3 189 -6 215 -6 42 -5 46 15 46 21 0 21 -2 21
-215z m1225 144 c4 -17 5 -33 2 -35 -9 -10 -57 8 -57 21 0 52 44 63 55 14z
m-1310 -74 l0 -50 -82 -3 -83 -3 0 49 c0 27 2 51 5 54 3 3 40 5 83 4 l77 -1 0
-50z m1425 -45 c0 -11 -4 -20 -10 -20 -5 0 -10 9 -10 20 0 11 5 20 10 20 6 0
10 -9 10 -20z m-1420 -60 c0 -6 -35 -10 -85 -10 -50 0 -85 4 -85 10 0 6 35 10
85 10 50 0 85 -4 85 -10z m-2 -117 l3 -63 -86 0 -85 0 0 65 0 66 83 -3 82 -3
3 -62z m1197 47 c3 -5 -1 -10 -10 -10 -9 0 -13 5 -10 10 3 6 8 10 10 10 2 0 7
-4 10 -10z m100 0 c3 -5 -1 -10 -10 -10 -9 0 -13 5 -10 10 3 6 8 10 10 10 2 0
7 -4 10 -10z m95 0 c0 -5 -5 -10 -11 -10 -5 0 -7 5 -4 10 3 6 8 10 11 10 2 0
4 -4 4 -10z m-143 -6 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z
m100 0 c-3 -3 -12 -4 -19 -1 -8 3 -5 6 6 6 11 1 17 -2 13 -5z m-147 -64 c0
-29 -4 -40 -15 -40 -11 0 -15 11 -15 40 0 29 4 40 15 40 11 0 15 -11 15 -40z
m50 0 c0 -29 -4 -40 -15 -40 -11 0 -15 11 -15 40 0 29 4 40 15 40 11 0 15 -11
15 -40z m50 0 c0 -29 -4 -40 -15 -40 -11 0 -15 11 -15 40 0 29 4 40 15 40 11
0 15 -11 15 -40z m50 0 c0 -29 -4 -40 -15 -40 -11 0 -15 11 -15 40 0 29 4 40
15 40 11 0 15 -11 15 -40z m42 28 c6 -51 4 -68 -8 -68 -10 0 -14 13 -14 40 0
22 5 40 10 40 6 0 11 -6 12 -12z m-1224 -153 c3 -14 -17 -15 -180 -13 -153 3
-183 5 -186 18 -2 13 22 15 180 13 157 -2 183 -4 186 -18z m1262 0 c-8 -10
-30 -15 -66 -15 -43 0 -56 -4 -66 -20 -10 -15 -24 -20 -59 -20 -38 0 -48 4
-52 20 -4 16 -14 20 -46 20 -29 0 -41 4 -41 15 0 12 28 15 168 17 92 2 169 2
171 1 2 -2 -2 -9 -9 -18z m-1270 -135 c0 -91 19 -136 64 -155 48 -20 777 -22
815 -2 47 24 61 56 64 142 2 67 5 80 20 83 12 2 17 -3 17 -17 0 -20 5 -21 105
-21 58 0 105 -4 105 -8 0 -23 -30 -32 -105 -32 -50 0 -86 -5 -93 -12 -7 -7
-12 -30 -12 -52 0 -52 -28 -98 -73 -119 -29 -14 -68 -17 -225 -17 -185 0 -190
-1 -205 -22 l-16 -23 -16 23 c-16 21 -21 22 -203 22 -165 0 -190 2 -215 19
-43 28 -59 58 -66 120 l-6 56 -101 3 c-86 2 -104 6 -119 22 -18 20 -17 20 113
20 125 0 132 1 132 20 0 11 5 20 10 20 6 0 10 -30 10 -70z"/>
                <path d="M624 1724 c-6 -22 1 -34 40 -72 l46 -46 45 44 c28 27 45 53 45 67 0
35 -27 39 -59 9 l-27 -26 -24 25 c-31 33 -58 32 -66 -1z"/>
                <path d="M1198 1286 l-158 -51 0 -287 0 -288 335 0 335 0 0 288 0 288 -168 52
c-92 29 -172 52 -177 51 -6 -1 -81 -24 -167 -53z m234 -33 c52 -29 98 -84 142
-171 55 -109 42 -224 -36 -300 -55 -55 -110 -76 -187 -70 -154 11 -256 168
-206 320 28 87 99 184 159 218 28 17 57 30 65 30 7 0 36 -12 63 -27z m-304
-120 c-4 -39 -28 -42 -28 -4 0 21 5 31 16 31 11 0 14 -8 12 -27z m527 -318 c0
-16 -6 -30 -12 -32 -9 -3 -13 7 -13 32 0 25 4 35 13 33 6 -3 12 -17 12 -33z"/>
                <path d="M1301 1140 c-34 -50 -68 -116 -77 -146 -15 -52 -15 -59 1 -100 18
-47 62 -90 101 -100 51 -13 114 2 148 35 60 58 67 129 23 216 -26 54 -117 185
-128 185 -4 0 -35 -41 -68 -90z m108 -94 c55 -95 54 -155 -2 -182 -40 -19 -78
-7 -103 32 -15 22 -16 32 -7 68 13 47 61 136 73 136 5 0 22 -24 39 -54z"/>
              </g>
            </svg>
            <span className='ml-3 text-xl'>LubriCar</span>
          </a>
        </div>
        <nav className='md:ml-auto md:mr-auto flex flex-wrap items-center text-base justify-center'>
          <SignedIn>
            {links.map((link) =>
              (link.role === 'admin' && userRole === 'admin') || !link.role ? (
                <Link key={link.title} href={link.url}>
                  {/* Use a div instead of an anchor tag */}
                  <div className='mr-5 cursor-pointer hover:text-gray-900'>
                    {link.title}
                  </div>
                </Link>
              ) : null
            )}
          </SignedIn>
        </nav>
        <div className='md:flex items-center'>
          <SignedOut>
            <a href='/sign-in'>
              <button className='text-white bg-indigo-500 border-0 py-2 px-4 focus:outline-none hover:bg-indigo-600 rounded text-base mr-4'>
                Login
              </button>
            </a>
            <a href='/sign-up'>
              <button className='text-white bg-indigo-500 border-0 py-2 px-4 focus:outline-none hover:bg-indigo-600 rounded text-base'>
                Sign Up
              </button>
            </a>
          </SignedOut>
          <SignedIn>
            <div className='ml-4'>
              <UserButton afterSignOutUrl='/' />
            </div>
          </SignedIn>
        </div>
      </div>
    </header>
  );
};

export default Navbar;
